import{a as ie,b as ae,c as oe,d as se,e as me,f as le,g as ce}from"./chunk-BCSYVWP6.js";import{e as W,h as $,j as J,k as K,l as Q,o as ee,q as te,r as re}from"./chunk-YM7QQZFK.js";import{a as de,b as pe}from"./chunk-AQYQ5BUP.js";import{T as ne,g as Y}from"./chunk-V4SXMBJN.js";import{Cb as j,Db as V,Dc as k,Ea as A,Eb as P,Fa as X,Fb as L,Gb as H,Ia as D,Ib as h,Mb as n,Nb as r,Ob as c,Qa as B,Xb as Z,_ as T,a as y,b as C,d as E,ea as R,fa as z,fc as a,gb as s,gc as p,ha as I,hc as O,ic as q,ja as M,ka as l,kb as F,lb as U,r as w,s as S,sb as _,tb as N,xb as b,zc as G}from"./chunk-3TOZSTAS.js";function Me(t,i){t&1&&c(0,"div",2)}var Pe=new I("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var ue=(()=>{class t{_elementRef=l(D);_ngZone=l(X);_changeDetectorRef=l(G);_renderer=l(F);_cleanupTransitionEnd;_animationMode=l(B,{optional:!0});constructor(){let e=l(Pe,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=ge(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=ge(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new A;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(o){return new(o||t)};static \u0275cmp=_({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(o,m){o&2&&(j("aria-valuenow",m._isIndeterminate()?null:m.value)("mode",m.mode),H("mat-"+m.color),L("_mat-animation-noopable",m._isNoopAnimation)("mdc-linear-progress--animation-ready",!m._isNoopAnimation)("mdc-linear-progress--indeterminate",m._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",k],bufferValue:[2,"bufferValue","bufferValue",k],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(o,m){o&1&&(n(0,"div",0),c(1,"div",1),b(2,Me,1,0,"div",2),r(),n(3,"div",3),c(4,"span",4),r(),n(5,"div",5),c(6,"span",4),r()),o&2&&(s(),P("flex-basis",m._getBufferBarFlexBasis()),s(),h(m.mode==="buffer"?2:-1),s(),P("transform",m._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return t})();function ge(t,i=0,e=100){return Math.max(i,Math.min(e,t))}var _e=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=N({type:t});static \u0275inj=z({imports:[ne]})}return t})();var v=class t{constructor(i,e){this.firestore=i;this.authService=e}getUserProfile(){return this.authService.currentUser.pipe(T(i=>i?w(this.fetchUserWithTasks(i.uid)):S({user:null,tasks:[],stats:{total:0,completed:0,pending:0,completionRate:0}})))}fetchUserWithTasks(i){return E(this,null,function*(){try{let e=J(this.firestore,"Users",i),o=yield K(e);if(!o.exists())return{user:null,tasks:[],stats:{total:0,completed:0,pending:0,completionRate:0}};let m=o.data(),d=C(y({},m),{id:i});if(!d.camps||d.camps.length===0)return{user:d,tasks:[],stats:{total:0,completed:0,pending:0,completionRate:0}};let he=$(this.firestore,"Tasks"),ve=ee(he,te("id","in",d.camps)),xe=yield Q(ve),g=[];xe.forEach(u=>{g.push(C(y({},u.data()),{id:u.id}))});let f=g.length,x=g.filter(u=>u.completed).length,ye=f-x,Ce=f>0?x/f*100:0;return{user:d,tasks:g,stats:{total:f,completed:x,pending:ye,completionRate:Ce}}}catch(e){return console.error("Hiba a felhaszn\xE1l\xF3i adatok bet\xF6lt\xE9se sor\xE1n:",e),{user:null,tasks:[],stats:{total:0,completed:0,pending:0,completionRate:0}}}})}static \u0275fac=function(e){return new(e||t)(M(W),M(re))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})};function Ee(t,i){t&1&&(n(0,"div",1)(1,"p"),a(2,"Felhaszn\xE1l\xF3i adatok bet\xF6lt\xE9se..."),r()())}function we(t,i){if(t&1&&(n(0,"div",3)(1,"div",4)(2,"div",5),a(3),r()(),n(4,"div",6)(5,"h3",7),a(6),r(),n(7,"div",8)(8,"mat-icon"),a(9,"email"),r(),n(10,"span"),a(11),r()()()(),n(12,"div",9)(13,"h2"),a(14,"T\xE1boraim"),r(),n(15,"div",10)(16,"mat-card",11)(17,"mat-card-header")(18,"mat-icon",12),a(19,"assignment"),r(),n(20,"mat-card-title"),a(21),r(),n(22,"mat-card-subtitle"),a(23,"\xD6sszesen"),r()()(),n(24,"mat-card",11)(25,"mat-card-header")(26,"mat-icon",12),a(27,"done_all"),r(),n(28,"mat-card-title"),a(29),r(),n(30,"mat-card-subtitle"),a(31,"J\xF3v\xE1hagyott jelentkez\xE9sek"),r()()(),n(32,"mat-card",11)(33,"mat-card-header")(34,"mat-icon",12),a(35,"pending"),r(),n(36,"mat-card-title"),a(37),r(),n(38,"mat-card-subtitle"),a(39,"F\xFCgg\u0151ben"),r()()()(),n(40,"mat-card",13)(41,"mat-card-content")(42,"div",14)(43,"h3"),a(44,"Completion Rate"),r(),n(45,"div",15),a(46),r()(),c(47,"mat-progress-bar",16),r()()()),t&2){let e=Z();s(3),O(" ",e.getUserInitials()," "),s(3),q("",e.user.name.firstname," ",e.user.name.lastname,""),s(5),p(e.user.email),s(10),p(e.stats.total),s(8),p(e.stats.completed),s(8),p(e.stats.pending),s(9),O(" ",e.stats.completionRate.toFixed(2),"% "),s(),V("value",e.stats.completionRate)}}function Se(t,i){t&1&&(n(0,"div",2)(1,"mat-icon"),a(2,"person_off"),r(),n(3,"p"),a(4,"No user profile found. Please log in."),r()())}var be=class t{constructor(i){this.userService=i}user=null;tasks=[];stats={total:0,completed:0,pending:0,completionRate:0};isLoading=!0;subscription=null;ngOnInit(){this.loadUserProfile()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}loadUserProfile(){this.isLoading=!0,this.subscription=this.userService.getUserProfile().subscribe({next:i=>{this.user=i.user,this.tasks=i.tasks,this.stats=i.stats,this.isLoading=!1},error:i=>{console.error("Hiba a felhaszn\xE1l\xF3i profil bet\xF6lt\xE9sekor:",i),this.isLoading=!1}})}getUserInitials(){if(!this.user||!this.user.name)return"?";let i=this.user.name.firstname?this.user.name.firstname.charAt(0).toUpperCase():"",e=this.user.name.lastname?this.user.name.lastname.charAt(0).toUpperCase():"";return i+(e||"")}static \u0275fac=function(e){return new(e||t)(U(v))};static \u0275cmp=_({type:t,selectors:[["app-profile"]],decls:9,vars:1,consts:[[1,"profile-container"],[1,"loading-container"],[1,"empty-state"],[1,"profile-info"],[1,"avatar-container"],[1,"avatar","mat-elevation-z2"],[1,"user-details"],[1,"user-name"],[1,"user-email"],[1,"stats-section"],[1,"stats-cards"],[1,"stat-card"],["mat-card-avatar",""],[1,"completion-card"],[1,"completion-header"],[1,"completion-value"],["mode","determinate",3,"value"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),a(4,"Felhaszn\xE1l\xF3i fi\xF3k"),r()(),n(5,"mat-card-content"),b(6,Ee,3,0,"div",1)(7,we,48,9)(8,Se,5,0,"div",2),r()()()),e&2&&(s(6),h(o.isLoading?6:o.user?7:8))},dependencies:[Y,ce,ie,le,oe,me,se,ae,pe,de,_e,ue],styles:[".profile-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto}mat-card[_ngcontent-%COMP%]{margin-bottom:20px}mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.profile-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin:20px 0 40px}.avatar-container[_ngcontent-%COMP%]{margin-right:24px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:#e8eaf6;display:flex;align-items:center;justify-content:center;font-size:32px;color:#3f51b5}.user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px;font-weight:500}.user-email[_ngcontent-%COMP%]{display:flex;align-items:center;color:#757575;font-size:16px}.user-email[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-right:8px}.stats-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 16px;font-size:20px;font-weight:500}.stats-cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}@media (max-width: 600px){.stats-cards[_ngcontent-%COMP%]{flex-direction:column}}.stat-card[_ngcontent-%COMP%]{flex:1}.stat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:28px;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:0}.stat-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#5a4af7}.completion-card[_ngcontent-%COMP%]{margin-top:16px}.completion-card[_ngcontent-%COMP%]   .completion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.completion-card[_ngcontent-%COMP%]   .completion-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500}.completion-card[_ngcontent-%COMP%]   .completion-header[_ngcontent-%COMP%]   .completion-value[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#5a4af7}.completion-card[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{height:8px;border-radius:4px}.loading-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:200px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#757575;margin-top:16px}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#757575;margin-bottom:16px}"]})};export{be as ProfileComponent};
